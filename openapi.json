{
  "openapi": "3.1.0",
  "info": {
    "title": "chat-learn-backend",
    "description": "",
    "license": { "name": "" },
    "version": "0.1.0"
  },
  "paths": {
    "/admin/users/permissions": {
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "admin_update_user_permissions",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateUserPermissionsRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Permissions updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AdminPermissionUpdateResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/attempt": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "attempt_get",
        "parameters": [
          {
            "name": "history_id",
            "in": "query",
            "required": false,
            "schema": { "type": ["integer", "null"], "format": "int64" }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Attempt list",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AttemptListResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "attempt_post",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/AttemptPostRequest" } }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Attempt created or updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AttemptPostResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/dashboard/overview": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "dashboard_overview_get",
        "parameters": [
          {
            "name": "week_start",
            "in": "query",
            "required": false,
            "schema": { "type": ["string", "null"] }
          },
          {
            "name": "tz",
            "in": "query",
            "required": false,
            "schema": { "type": ["string", "null"] }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard overview fetched",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/DashboardOverviewResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "500": {
            "description": "Internal error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/dashboard/overview/subject": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "dashboard_overview_subject_get",
        "parameters": [
          { "name": "subject", "in": "query", "required": true, "schema": { "type": "string" } },
          {
            "name": "week_start",
            "in": "query",
            "required": false,
            "schema": { "type": ["string", "null"] }
          },
          {
            "name": "tz",
            "in": "query",
            "required": false,
            "schema": { "type": ["string", "null"] }
          },
          {
            "name": "tag",
            "in": "query",
            "required": false,
            "schema": { "type": ["string", "null"] }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Subject tag dashboard overview fetched",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/DashboardOverviewSubjectResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "500": {
            "description": "Internal error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/history": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "history_get",
        "parameters": [
          {
            "name": "history_id",
            "in": "query",
            "required": false,
            "schema": { "type": ["integer", "null"], "format": "int64" }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "History list",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HistoryListResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["ChatCNU"],
        "operationId": "history_delete",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/HistoryDeleteRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "History deleted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/login": {
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/LoginRequest" } }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Login success",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/LoginResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "500": {
            "description": "Internal error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/logout": {
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "logout",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Logout success",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/models": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "models_get",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Current user available models",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ModelsResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "500": {
            "description": "Internal error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/profile": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "profile_get",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Profile fetched",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProfileResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "profile_post",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ProfileUpdateRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Profile updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProfileResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/profile/trend": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "profile_trend_get",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": { "type": ["integer", "null"], "format": "int32" }
          },
          {
            "name": "tz",
            "in": "query",
            "required": false,
            "schema": { "type": ["string", "null"] }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Profile trend fetched",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProfileTrendResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "500": {
            "description": "Internal error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/questions": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "questions_get",
        "parameters": [
          {
            "name": "history_id",
            "in": "query",
            "required": true,
            "schema": { "type": "integer", "format": "int64" }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Question list",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/QuestionListResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/questions/answer": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "questions_answer",
        "parameters": [
          {
            "name": "question_id",
            "in": "query",
            "required": true,
            "schema": { "type": "integer", "format": "int64" }
          },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Question answer",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/QuestionAnswerResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/questions/create": {
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "questions_create",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateQuestionRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Questions created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/QuestionsCreateResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "502": {
            "description": "Upstream error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/questions/create/stream": {
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "questions_create_stream",
        "parameters": [
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateQuestionRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "SSE stream of generated questions",
            "content": { "text/event-stream": { "schema": { "type": "string" } } }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/register": {
      "post": {
        "tags": ["ChatCNU"],
        "operationId": "register",
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/RegisterRequest" } }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Register success",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/RegisterResponseSchema" }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "429": {
            "description": "Too many requests",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "500": {
            "description": "Internal error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    },
    "/statistics": {
      "get": {
        "tags": ["ChatCNU"],
        "operationId": "statistics_get",
        "parameters": [
          { "name": "subject", "in": "query", "required": true, "schema": { "type": "string" } },
          {
            "name": "AUTHORIZATION",
            "in": "header",
            "description": "JWT token",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Weekly statistics",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/StatisticsResponseSchema" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NoDataResponseSchema" }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AdminPermissionUpdateDataSchema": {
        "type": "object",
        "required": ["name", "models"],
        "properties": {
          "models": { "type": "array", "items": { "type": "string" } },
          "name": { "type": "string" }
        }
      },
      "AdminPermissionUpdateResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/AdminPermissionUpdateDataSchema" },
          "info": { "type": "string" }
        }
      },
      "AttemptListResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "type": "array", "items": { "$ref": "#/components/schemas/AttemptSchema" } },
          "info": { "type": "string" }
        }
      },
      "AttemptPostDataSchema": {
        "type": "object",
        "required": ["attempt"],
        "properties": { "attempt": { "$ref": "#/components/schemas/AttemptSchema" } }
      },
      "AttemptPostRequest": {
        "type": "object",
        "required": ["history_id", "question_id", "type", "choice_answers"],
        "properties": {
          "choice_answers": { "type": "array", "items": { "type": "integer", "format": "int32" } },
          "history_id": { "type": "integer", "format": "int64" },
          "question_id": { "type": "integer", "format": "int64" },
          "type": { "type": "string" }
        }
      },
      "AttemptPostResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/AttemptPostDataSchema" },
          "info": { "type": "string" }
        }
      },
      "AttemptSchema": {
        "type": "object",
        "required": [
          "attempt_id",
          "attempt_time",
          "user_answers",
          "is_correct",
          "question_id",
          "history_id",
          "user_id"
        ],
        "properties": {
          "attempt_id": { "type": "integer", "format": "int64" },
          "attempt_time": { "type": "string" },
          "history_id": { "type": "integer", "format": "int64" },
          "is_correct": { "type": "boolean" },
          "question_id": { "type": "integer", "format": "int64" },
          "user_answers": { "type": "array", "items": { "type": "integer", "format": "int32" } },
          "user_id": { "type": "string" }
        }
      },
      "CreateQuestionRequest": {
        "type": "object",
        "required": ["subject", "tag", "type", "number", "model"],
        "properties": {
          "model": { "type": "string" },
          "number": { "type": "integer", "format": "int32", "minimum": 0 },
          "subject": { "type": "string" },
          "tag": { "type": "string" },
          "type": { "type": "string" }
        }
      },
      "DailyProfileTrendSchema": {
        "type": "object",
        "required": ["date", "total_attempts", "correct_attempts", "incorrect_attempts"],
        "properties": {
          "correct_attempts": { "type": "integer", "format": "int64" },
          "date": { "type": "string" },
          "incorrect_attempts": { "type": "integer", "format": "int64" },
          "total_attempts": { "type": "integer", "format": "int64" }
        }
      },
      "DailyStatisticsSchema": {
        "type": "object",
        "required": [
          "date",
          "total_attempts",
          "correct_attempts",
          "correct_rate",
          "questions_on_date"
        ],
        "properties": {
          "correct_attempts": { "type": "integer", "format": "int64" },
          "correct_rate": { "type": "number", "format": "double" },
          "date": { "type": "string" },
          "questions_on_date": {
            "type": "array",
            "items": { "type": "integer", "format": "int64" }
          },
          "total_attempts": { "type": "integer", "format": "int64" }
        }
      },
      "DashboardDailyOverviewSchema": {
        "type": "object",
        "required": [
          "date",
          "total_attempts",
          "correct_attempts",
          "incorrect_attempts",
          "accuracy_rate"
        ],
        "properties": {
          "accuracy_rate": { "type": "number", "format": "double" },
          "correct_attempts": { "type": "integer", "format": "int64" },
          "date": { "type": "string" },
          "incorrect_attempts": { "type": "integer", "format": "int64" },
          "total_attempts": { "type": "integer", "format": "int64" }
        }
      },
      "DashboardDailyTagItemSchema": {
        "type": "object",
        "required": [
          "tag",
          "total_attempts",
          "correct_attempts",
          "incorrect_attempts",
          "accuracy_rate"
        ],
        "properties": {
          "accuracy_rate": { "type": "number", "format": "double" },
          "correct_attempts": { "type": "integer", "format": "int64" },
          "incorrect_attempts": { "type": "integer", "format": "int64" },
          "tag": { "type": "string" },
          "total_attempts": { "type": "integer", "format": "int64" }
        }
      },
      "DashboardDailyTagOverviewSchema": {
        "type": "object",
        "required": ["date", "tags"],
        "properties": {
          "date": { "type": "string" },
          "tags": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DashboardDailyTagItemSchema" }
          }
        }
      },
      "DashboardOverviewDataSchema": {
        "type": "object",
        "required": [
          "latest_time",
          "start_of_week",
          "end_of_week",
          "focus_subject",
          "summary",
          "daily_overview",
          "subject_overview"
        ],
        "properties": {
          "daily_overview": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DashboardDailyOverviewSchema" }
          },
          "end_of_week": { "type": "string" },
          "focus_subject": { "type": "string" },
          "latest_time": { "type": "string" },
          "start_of_week": { "type": "string" },
          "subject_overview": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DashboardSubjectOverviewSchema" }
          },
          "summary": { "$ref": "#/components/schemas/DashboardSummarySchema" }
        }
      },
      "DashboardOverviewResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/DashboardOverviewDataSchema" },
          "info": { "type": "string" }
        }
      },
      "DashboardOverviewSubjectDataSchema": {
        "type": "object",
        "required": [
          "latest_time",
          "start_of_week",
          "end_of_week",
          "focus_subject",
          "focus_tag",
          "summary",
          "daily_overview",
          "tag_overview",
          "daily_tag_overview"
        ],
        "properties": {
          "daily_overview": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DashboardDailyOverviewSchema" }
          },
          "daily_tag_overview": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DashboardDailyTagOverviewSchema" }
          },
          "end_of_week": { "type": "string" },
          "focus_subject": { "type": "string" },
          "focus_tag": { "type": "string" },
          "latest_time": { "type": "string" },
          "start_of_week": { "type": "string" },
          "summary": { "$ref": "#/components/schemas/DashboardSubjectTagSummarySchema" },
          "tag_overview": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DashboardTagOverviewSchema" }
          }
        }
      },
      "DashboardOverviewSubjectResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/DashboardOverviewSubjectDataSchema" },
          "info": { "type": "string" }
        }
      },
      "DashboardSubjectOverviewSchema": {
        "type": "object",
        "required": ["subject", "total_attempts", "correct_attempts", "accuracy_rate"],
        "properties": {
          "accuracy_rate": { "type": "number", "format": "double" },
          "correct_attempts": { "type": "integer", "format": "int64" },
          "subject": { "type": "string" },
          "total_attempts": { "type": "integer", "format": "int64" }
        }
      },
      "DashboardSubjectTagSummarySchema": {
        "type": "object",
        "required": [
          "total_attempts",
          "correct_attempts",
          "accuracy_rate",
          "active_days",
          "streak_days",
          "weekly_goal",
          "weekly_goal_progress",
          "tag_count",
          "tag_rank"
        ],
        "properties": {
          "accuracy_rate": { "type": "number", "format": "double" },
          "active_days": { "type": "integer", "format": "int64" },
          "correct_attempts": { "type": "integer", "format": "int64" },
          "streak_days": { "type": "integer", "format": "int64" },
          "tag_count": { "type": "integer", "format": "int64" },
          "tag_rank": { "type": "integer", "format": "int64" },
          "total_attempts": { "type": "integer", "format": "int64" },
          "weekly_goal": { "type": "integer", "format": "int64" },
          "weekly_goal_progress": { "type": "number", "format": "double" }
        }
      },
      "DashboardSummarySchema": {
        "type": "object",
        "required": [
          "total_attempts",
          "correct_attempts",
          "accuracy_rate",
          "active_days",
          "streak_days",
          "weekly_goal",
          "weekly_goal_progress",
          "subject_rank",
          "active_subject_count"
        ],
        "properties": {
          "accuracy_rate": { "type": "number", "format": "double" },
          "active_days": { "type": "integer", "format": "int64" },
          "active_subject_count": { "type": "integer", "format": "int64" },
          "correct_attempts": { "type": "integer", "format": "int64" },
          "streak_days": { "type": "integer", "format": "int64" },
          "subject_rank": { "type": "integer", "format": "int64" },
          "total_attempts": { "type": "integer", "format": "int64" },
          "weekly_goal": { "type": "integer", "format": "int64" },
          "weekly_goal_progress": { "type": "number", "format": "double" }
        }
      },
      "DashboardTagOverviewSchema": {
        "type": "object",
        "required": [
          "tag",
          "total_attempts",
          "correct_attempts",
          "incorrect_attempts",
          "accuracy_rate",
          "active_days"
        ],
        "properties": {
          "accuracy_rate": { "type": "number", "format": "double" },
          "active_days": { "type": "integer", "format": "int64" },
          "correct_attempts": { "type": "integer", "format": "int64" },
          "incorrect_attempts": { "type": "integer", "format": "int64" },
          "tag": { "type": "string" },
          "total_attempts": { "type": "integer", "format": "int64" }
        }
      },
      "HistoryDeleteRequest": {
        "type": "object",
        "required": ["history_id"],
        "properties": { "history_id": { "type": "integer", "format": "int64" } }
      },
      "HistoryListResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "type": "array", "items": { "$ref": "#/components/schemas/HistorySchema" } },
          "info": { "type": "string" }
        }
      },
      "HistorySchema": {
        "type": "object",
        "required": ["history_id", "user_id", "create_time", "subject", "tag", "progress"],
        "properties": {
          "create_time": { "type": "integer", "format": "int64" },
          "history_id": { "type": "integer", "format": "int64" },
          "progress": { "type": "number", "format": "double" },
          "subject": { "type": "string" },
          "tag": { "type": "string" },
          "user_id": { "type": "string" }
        }
      },
      "LoginDataSchema": {
        "type": "object",
        "required": ["user", "token"],
        "properties": {
          "token": { "type": "string" },
          "user": { "$ref": "#/components/schemas/UserSchema" }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["name", "password"],
        "properties": { "name": { "type": "string" }, "password": { "type": "string" } }
      },
      "LoginResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/LoginDataSchema" },
          "info": { "type": "string" }
        }
      },
      "ModelsDataSchema": {
        "type": "object",
        "required": ["name", "models"],
        "properties": {
          "models": { "type": "array", "items": { "type": "string" } },
          "name": { "type": "string" }
        }
      },
      "ModelsResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/ModelsDataSchema" },
          "info": { "type": "string" }
        }
      },
      "NoDataResponseSchema": {
        "type": "object",
        "required": ["code", "info"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "info": { "type": "string" }
        }
      },
      "ProfileResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/UserSchema" },
          "info": { "type": "string" }
        }
      },
      "ProfileTrendDataSchema": {
        "type": "object",
        "required": ["latest_time", "start_date", "end_date", "daily_trend"],
        "properties": {
          "daily_trend": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DailyProfileTrendSchema" }
          },
          "end_date": { "type": "string" },
          "latest_time": { "type": "string" },
          "start_date": { "type": "string" }
        }
      },
      "ProfileTrendResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/ProfileTrendDataSchema" },
          "info": { "type": "string" }
        }
      },
      "ProfileUpdateRequest": {
        "type": "object",
        "properties": {
          "new_email": { "type": ["string", "null"] },
          "new_name": { "type": ["string", "null"] },
          "new_password": { "type": ["string", "null"] },
          "new_weekly_goal": { "type": ["integer", "null"], "format": "int32" }
        }
      },
      "QuestionAnswerDataSchema": {
        "type": "object",
        "required": ["content", "options", "answer", "explanation", "difficulty", "time_require"],
        "properties": {
          "answer": { "type": "array", "items": { "type": "integer", "format": "int32" } },
          "content": { "type": "string" },
          "difficulty": { "type": "integer", "format": "int32" },
          "explanation": { "type": "string" },
          "options": { "type": "array", "items": { "type": "string" } },
          "time_require": { "type": "integer", "format": "int32" }
        }
      },
      "QuestionAnswerResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/QuestionAnswerDataSchema" },
          "info": { "type": "string" }
        }
      },
      "QuestionListResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "type": "array", "items": { "$ref": "#/components/schemas/QuestionSchema" } },
          "info": { "type": "string" }
        }
      },
      "QuestionSchema": {
        "type": "object",
        "required": [
          "question_id",
          "content",
          "explanation",
          "difficulty",
          "time_require",
          "type",
          "history_id",
          "options",
          "correct_answers"
        ],
        "properties": {
          "content": { "type": "string" },
          "correct_answers": { "type": "array", "items": { "type": "integer", "format": "int32" } },
          "difficulty": { "type": "integer", "format": "int32" },
          "explanation": { "type": "string" },
          "history_id": { "type": "integer", "format": "int64" },
          "note": { "type": ["string", "null"] },
          "options": { "type": "array", "items": { "type": "string" } },
          "question_id": { "type": "integer", "format": "int64" },
          "time_require": { "type": "integer", "format": "int32" },
          "type": { "type": "string", "example": "single" }
        }
      },
      "QuestionsCreateDataSchema": {
        "type": "object",
        "required": ["subject", "tag", "type", "questions", "history", "number"],
        "properties": {
          "history": { "type": "array", "items": { "$ref": "#/components/schemas/HistorySchema" } },
          "number": { "type": "integer", "format": "int32", "minimum": 0 },
          "questions": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/QuestionSchema" }
          },
          "subject": { "type": "string" },
          "tag": { "type": "string" },
          "type": { "type": "string", "example": "single" }
        }
      },
      "QuestionsCreateResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/QuestionsCreateDataSchema" },
          "info": { "type": "string" }
        }
      },
      "RegisterRequest": {
        "type": "object",
        "required": ["name", "password", "email", "role"],
        "properties": {
          "email": { "type": "string" },
          "name": { "type": "string" },
          "password": { "type": "string" },
          "role": { "type": "string" }
        }
      },
      "RegisterResponseSchema": {
        "type": "object",
        "required": ["code", "info", "user"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "info": { "type": "string" },
          "user": { "$ref": "#/components/schemas/UserSchema" }
        }
      },
      "StatisticsDataSchema": {
        "type": "object",
        "required": ["latest_time", "start_of_week", "end_of_week", "daily_statistics"],
        "properties": {
          "daily_statistics": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/DailyStatisticsSchema" }
          },
          "end_of_week": { "type": "string" },
          "latest_time": { "type": "string" },
          "start_of_week": { "type": "string" }
        }
      },
      "StatisticsResponseSchema": {
        "type": "object",
        "required": ["code", "info", "data"],
        "properties": {
          "code": { "type": "integer", "format": "int32" },
          "data": { "$ref": "#/components/schemas/StatisticsDataSchema" },
          "info": { "type": "string" }
        }
      },
      "UpdateUserPermissionsRequest": {
        "type": "object",
        "required": ["name", "models"],
        "properties": {
          "models": { "type": "array", "items": { "type": "string" } },
          "name": { "type": "string" }
        }
      },
      "UserSchema": {
        "type": "object",
        "required": ["user_id", "name", "password", "email", "role", "weekly_goal"],
        "properties": {
          "email": { "type": "string" },
          "name": { "type": "string" },
          "password": { "type": "string" },
          "role": { "type": "string" },
          "user_id": { "type": "string" },
          "weekly_goal": { "type": "integer", "format": "int32" }
        }
      }
    }
  },
  "tags": [{ "name": "ChatCNU", "description": "Chat Learn Backend API" }]
}
